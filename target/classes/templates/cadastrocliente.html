<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Cadastro de Cliente</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.8/jquery.inputmask.min.js"></script>
</head>
<body>

<div class="container mt-4">
  <h2>Cadastro de Cliente</h2>
  <form id="cadastroClienteForm" th:action="@{/registrar/cliente}" th:object="${cliente}" method="post" class="needs-validation" novalidate>
    <div class="mb-3">
      <label for="nomeCompleto" class="form-label">Nome Completo</label>
      <input type="text" class="form-control" id="nomeCompleto" th:field="*{nome}" required>
      <div class="invalid-feedback">Por favor, insira o nome completo.</div>
    </div>

    <div class="mb-3">
      <label for="cpf" class="form-label">CPF</label>
      <input type="text" class="form-control" id="cpf" th:field="*{cpf}" required
             pattern="\d{3}\.\d{3}\.\d{3}-\d{2}">
      <div class="invalid-feedback">Formato inválido (XXX.XXX.XXX-XX)</div>
    </div>

    <div class="mb-3">
      <label for="cep" class="form-label">CEP</label>
      <input type="text" class="form-control" id="cep" th:field="*{cep}" required>
      <div class="invalid-feedback">Por favor, insira o CEP.</div>
    </div>

    <div class="mb-3">
      <label for="endereco" class="form-label">Endereço</label>
      <input type="text" class="form-control" id="endereco" th:field="*{endereco}" required>
      <div class="invalid-feedback">Por favor, insira o endereço.</div>
    </div>

    <div class="mb-3">
      <label for="telefone" class="form-label">Telefone</label>
      <input type="tel" class="form-control" id="telefone" th:field="*{telefone}" required
             pattern="\(\d{2}\) \d{5}-\d{4}">
      <div class="invalid-feedback">Formato inválido (XX) 9XXXX-XXXX</div>
    </div>

    <div class="mb-3">
      <label for="email" class="form-label">E-mail</label>
      <input type="email" class="form-control" id="email" th:field="*{email}" required>
      <div class="invalid-feedback">Por favor, insira um e-mail válido.</div>
    </div>

    <div class="mb-3">
      <label for="senha" class="form-label">Crie uma senha</label>
      <input type="password" class="form-control" id="senha" th:field="*{senha}" required
             minlength="6">
      <div class="invalid-feedback">Mínimo 6 caracteres</div>
    </div>

    <div class="mb-3">
        <label for="genero" class="form-label">Gênero</label>
        <select class="form-select" id="genero" th:field="*{genero}">
            <option value="" selected disabled>Selecione...</option>
            <option value="Masculino">Masculino</option>
            <option value="Feminino">Feminino</option>
            <option value="Outro">Outro</option>
            <option value="Prefiro não informar">Prefiro não informar</option>
        </select>
        <div class="invalid-feedback">Por favor, selecione o gênero.</div>
    </div>

    <button type="submit" class="btn btn-primary">Cadastrar</button>
    <a href="/" class="btn btn-secondary">Voltar</a>

  </form>
</div>

<script>
  $(document).ready(function(){
    $('#cpf').inputmask('999.999.999-99');
    $('#telefone').inputmask('(99) 99999-9999');
    $('#cep').inputmask('99999-999'); // Máscara para CEP
  });

  // Script para validação Bootstrap
  (function () {
    'use strict'
    var forms = document.querySelectorAll('.needs-validation')
    Array.prototype.slice.call(forms)
      .forEach(function (form) {
        form.addEventListener('submit', function (event) {
          if (!form.checkValidity()) {
            event.preventDefault()
            event.stopPropagation()
          }
          form.classList.add('was-validated')
        }, false)
      })
  })()
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
